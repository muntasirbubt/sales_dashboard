<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <t t-name="sales_dashboard.DashboardTemplate">
        <div class="o_sales_dashboard">
            <!-- Date Range Selector - Fixed Header -->
            <div class="o_date_filter text-center"
                 style="display:flex; justify-content:center; align-items:center; min-height:50px;">
                <form class="o_date_form" onsubmit="return false;">
                    <label for="startDate" class="o_date_label">From:</label>
                    <input id="startDate" type="date" t-model="state.startDate" class="o_date_input"/>
                    <span class="o_date_separator">â€“</span>
                    <label for="endDate" class="o_date_label">To:</label>
                    <input id="endDate" type="date" t-model="state.endDate" class="o_date_input"/>
                    <button type="button" class="btn btn-primary o_apply_btn" t-on-click="loadData">Apply</button>
                </form>
            </div>

            <!-- Scrollable Content Area -->
            <div class="o_dashboard_scrollable pl-5 pr-5">

                <!-- Additional Data Sections -->
                <div class="o_data_section pb-3">
                    <!-- Best Salespersons List -->
                    <article class="o_dashboard_card">
                        <header class="o_dashboard_card_header">
                            <h5>Best Salespersons (List)</h5>
                        </header>
                        <div class="o_dashboard_card_body">
                            <ul class="o_dashboard_list">
                                <t t-foreach="state.data.best_salespersons" t-as="salesperson"
                                   t-key="salesperson.user_id[0]">
                                    <li class="o_dashboard_item">
                                        <span class="o_dashboard_item_name" t-esc="salesperson.user_id[1]"/>
                                        <span class="o_dashboard_value"
                                              t-esc="this.formatCurrency(salesperson.amount_total)"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </article>

                    <!-- Top Salespersons by Orders List -->
                    <article class="o_dashboard_card">
                        <header class="o_dashboard_card_header">
                            <h5>Top Salespersons (By Orders)</h5>
                        </header>
                        <div class="o_dashboard_card_body">
                            <ul class="o_dashboard_list">
                                <t t-foreach="state.data.best_salespersons_by_confirm_order" t-as="salesperson"
                                   t-key="salesperson.user_id[0]">
                                    <li class="o_dashboard_item">
                                        <span class="o_dashboard_item_name" t-esc="salesperson.user_id[1]"/>
                                        <span class="o_dashboard_value" t-esc="salesperson.user_id_count"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </article>

                    <!-- Payment Status List -->
                    <article class="o_dashboard_card">
                        <header class="o_dashboard_card_header">
                            <h5>Payment Status</h5>
                        </header>
                        <div class="o_dashboard_card_body">
                            <ul class="o_dashboard_list">
                                <t t-foreach="state.data.payment_summary" t-as="payment" t-key="payment.payment_state">
                                    <li class="o_dashboard_item">
                                        <span class="o_dashboard_item_name">
                                            <t t-if="payment.payment_state == 'not_paid'">Not Paid</t>
                                            <t t-elif="payment.payment_state == 'paid'">Paid</t>
                                            <t t-elif="payment.payment_state == 'in_payment'">In Payment</t>
                                            <t t-elif="payment.payment_state == 'partial'">Partially Paid</t>
                                            <t t-elif="payment.payment_state == 'reversed'">Reversed</t>
                                            <t t-elif="payment.payment_state == 'invoicing_legacy'">Invoicing App
                                                Legacy
                                            </t>
                                            <t t-else="">Unknown</t>
                                        </span>
                                        <span class="o_dashboard_value" t-esc="payment.payment_state_count"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </article>

                    <!-- Status Overview List -->
                    <article class="o_dashboard_card">
                        <header class="o_dashboard_card_header">
                            <h5>Sales States Overview</h5>
                        </header>
                        <div class="o_dashboard_card_body">
                            <ul class="o_dashboard_list">
                                <t t-foreach="state.data.status_overview" t-as="status" t-key="status.state">
                                    <li class="o_dashboard_item">
                                        <span class="o_dashboard_item_name">
                                            <t t-if="status.state == 'draft'">Draft</t>
                                            <t t-elif="status.state == 'sent'">RFQ Sent</t>
                                            <t t-elif="status.state == 'cancel'">Cancel</t>
                                            <t t-elif="status.state == 'sale'">Sale Order</t>
                                            <t t-else="">Unknown</t>
                                        </span>
                                        <span class="o_dashboard_value" t-esc="status.state_count"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </article>

                    <!--                    &lt;!&ndash; Payment Order Summary &ndash;&gt;-->
                    <!--                    <article class="o_dashboard_card">-->
                    <!--                        <header class="o_dashboard_card_header">-->
                    <!--                            <h5>Payment Order Summary</h5>-->
                    <!--                        </header>-->
                    <!--                        <div class="o_dashboard_card_body">-->
                    <!--                            <ul class="o_dashboard_list">-->
                    <!--                                <t t-foreach="state.data.payment_order_summary" t-as="payment"-->
                    <!--                                   t-key="payment.journal_id[0]">-->
                    <!--                                    <li class="o_dashboard_item">-->
                    <!--                                        <span class="o_dashboard_item_name" t-esc="payment.journal_id[1]"/>-->
                    <!--                                        <span class="o_dashboard_value" t-esc="this.formatCurrency(payment.amount)"/>-->
                    <!--                                    </li>-->
                    <!--                                </t>-->
                    <!--                            </ul>-->
                    <!--                        </div>-->
                    <!--                    </article>-->
                </div>



                <!-- Charts Section -->
                <div class="o_charts_section">
                    <!-- Row 1 -->
                    <div class="o_charts_row">
                        <article class="o_dashboard_card o_best_products">
                            <header class="o_dashboard_card_header">
                                <h5>Best Selling Products (Top Five)</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <div class="o_products_content">
                                    <div class="o_products_list">
                                        <ul class="o_dashboard_list">
                                            <t t-foreach="state.data.best_selling_products" t-as="product"
                                               t-key="product.product_id[0]">
                                                <li class="o_dashboard_item">
                                                    <span class="o_dashboard_item_name" t-esc="product.product_id[1]"/>
                                                    <span class="o_dashboard_value" t-esc="product.qty_delivered"/>
                                                </li>
                                            </t>
                                        </ul>
                                    </div>
                                    <div class="o_products_chart">
                                        <canvas id="best_products_graph"></canvas>
                                    </div>
                                </div>
                            </div>
                        </article>
                        <!-- Add this to your template where you want the chart to appear -->
                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Day Wise Sales Amount</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="day_wise_sales_chart"></canvas>
                            </div>
                        </article>
                    </div>
                    <div class="o_charts_row">
                        <!-- Best Salespersons Histogram -->
                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Best Salespersons (By Sales)</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="best_salespersons_histogram"></canvas>
                            </div>
                        </article>

                        <!-- Payment Status Donut Chart -->
                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Payment Status</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="payment_status_donut"></canvas>
                            </div>
                        </article>

                        <!-- Status Overview Pie Chart -->
                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Status Overview</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="status_overview_pie"></canvas>
                            </div>
                        </article>
                    </div>

                    <!-- Row 2 -->
                    <div class="o_charts_row pb-5">
                        <!-- Top Salespersons Bar Chart -->
                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Top Salespersons (By Orders)</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="top_salespersons_bar"></canvas>
                            </div>
                        </article>

                        <article class="o_dashboard_card">
                            <header class="o_dashboard_card_header">
                                <h5>Top Customers (Amount Wise)</h5>
                            </header>
                            <div class="o_dashboard_card_body">
                                <canvas id="top_customers_chart"></canvas>
                            </div>
                        </article>

                    </div>
                </div>

<!--                 &lt;!&ndash; Products Section &ndash;&gt;-->
<!--                <div class="o_products_section">-->
<!--                    &lt;!&ndash; Best Selling Products &ndash;&gt;-->
<!--                    <article class="o_dashboard_card o_best_products">-->
<!--                        <header class="o_dashboard_card_header">-->
<!--                            <h5>Best Selling Products (Top Five)</h5>-->
<!--                        </header>-->
<!--                        <div class="o_dashboard_card_body">-->
<!--                            <div class="o_products_content">-->
<!--                                <div class="o_products_list">-->
<!--                                    <ul class="o_dashboard_list">-->
<!--                                        <t t-foreach="state.data.best_selling_products" t-as="product"-->
<!--                                           t-key="product.product_id[0]">-->
<!--                                            <li class="o_dashboard_item">-->
<!--                                                <span class="o_dashboard_item_name" t-esc="product.product_id[1]"/>-->
<!--                                                <span class="o_dashboard_value" t-esc="product.qty_delivered"/>-->
<!--                                            </li>-->
<!--                                        </t>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                                <div class="o_products_chart">-->
<!--                                    <canvas id="best_products_graph"></canvas>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </article>-->
<!--                </div>-->

            </div>
            <!-- End of scrollable content -->
        </div>
    </t>
</templates>